{"version":3,"sources":["webpack:///./src/app/app.component.css","webpack:///./src/app/header.component.css","webpack:///./src/app/img-canvas.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/header.component.html","webpack:///./src/app/img-canvas.component.html","webpack:///./src/app/file.service.ts","webpack:///./src/app/img-canvas.component.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/header.component.ts","webpack:///./src/app/img-part.service.ts","webpack:///./src/environments/environment.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \":host {\\r\\n    display: -webkit-box;\\r\\n    display: -ms-flexbox;\\r\\n    display: flex;\\r\\n    height: 100%;\\r\\n    overflow: hidden;\\r\\n    -webkit-box-orient: vertical;\\r\\n    -webkit-box-direction: normal;\\r\\n        -ms-flex-direction: column;\\r\\n            flex-direction: column;\\r\\n}\\r\\n\\r\\nmy-img-canvas {\\r\\n    width: 100%;\\r\\n    -webkit-box-flex: 1;\\r\\n        -ms-flex-positive: 1;\\r\\n            flex-grow: 1;\\r\\n    -ms-flex-negative: 1;\\r\\n        flex-shrink: 1;\\r\\n    -ms-flex-preferred-size: 0;\\r\\n        flex-basis: 0;\\r\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 131\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \":host {\\r\\n    padding: 0 1em;\\r\\n    /*margin-bottom: 1em;*/\\r\\n    box-shadow: 0 2px 8px;\\r\\n    color: #444;\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\nh4 {\\r\\n    color: #888;\\r\\n}\\r\\n\\r\\nlabel {\\r\\n    color: #888;\\r\\n    box-shadow: 1px 1px 3px;\\r\\n    padding: .5em;\\r\\n    position: absolute;\\r\\n    text-align: center;\\r\\n    right: 1em;\\r\\n    bottom: 1em;\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\nlabel img {\\r\\n    width: 1.4em;\\r\\n    height: 1.4em;\\r\\n    vertical-align: sub;\\r\\n}\\r\\n\\r\\nlabel:hover {\\r\\n    background: #eee;\\r\\n}\\r\\n\\r\\nlabel:active {\\r\\n    box-shadow: 0 0 0;\\r\\n}\\r\\n\\r\\nlabel input {\\r\\n    display: none;\\r\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/header.component.css\n// module id = 132\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"canvas {\\r\\n    display: block;\\r\\n}\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/img-canvas.component.css\n// module id = 133\n// module chunks = 1","module.exports = \"<my-header (onSelectImage)=\\\"onSelectImage()\\\"></my-header>\\r\\n<my-img-canvas></my-img-canvas>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 135\n// module chunks = 1","module.exports = \"<h1>{{title}}</h1>\\r\\n<h4>{{subTitle}}</h4>\\r\\n<label>\\r\\n    <img src=\\\"assets/switch.png\\\" alt=\\\"Switch Image\\\">\\r\\n    Switch Image\\r\\n    <input type=\\\"file\\\" #fileInput accept=\\\"image/gif,image/jpg,image/jpeg,image/png,image/bmp\\\" (change)=\\\"readImage(fileInput)\\\">\\r\\n</label>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/header.component.html\n// module id = 136\n// module chunks = 1","module.exports = \"<canvas #canvas></canvas>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/img-canvas.component.html\n// module id = 137\n// module chunks = 1","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class FileService {\r\n    imageData: string = 'assets/default.png';\r\n\r\n    readFile(imageFile: File): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            let fileReader: FileReader = new FileReader();\r\n            fileReader.onload = function () {\r\n                resolve(fileReader.result);\r\n            };\r\n            fileReader.readAsDataURL(imageFile);\r\n        }).then((data: string) => { this.imageData = data; });\r\n    }\r\n\r\n    loadImage(containerWidth: number, containerHeight: number): Promise<HTMLCanvasElement> {\r\n        return new Promise((resolve, reject) => {\r\n            let img = document.createElement('img') as HTMLImageElement;\r\n            img.onload = () => {\r\n                resolve(img);\r\n            };\r\n            img.src = this.imageData;\r\n        }).then((img: HTMLImageElement) => {\r\n            let maxW = Math.min(Math.floor(containerWidth * .9), img.width);\r\n            let maxH = Math.min(Math.floor(containerHeight * .9), img.height);\r\n\r\n            let scale = Math.min(maxW / img.width, maxH / img.height);\r\n\r\n            let drawWidth = Math.floor(img.width * scale);\r\n            let drawHeight = Math.floor(img.height * scale);\r\n\r\n            let imgCanvas = document.createElement('canvas');\r\n            imgCanvas.width = drawWidth;\r\n            imgCanvas.height = drawHeight;\r\n            let imgContext = imgCanvas.getContext('2d');\r\n            imgContext.drawImage(img, 0, 0, img.width, img.height, 0, 0, drawWidth, drawHeight);\r\n\r\n            return imgCanvas;\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/file.service.ts","import { Component, ViewChild, ElementRef, AfterViewInit, HostListener } from '@angular/core';\r\nimport { Subject } from 'rxjs/Subject';\r\nimport 'rxjs/add/operator/debounceTime';\r\n\r\nimport { FileService } from './file.service';\r\nimport { ImgPartService } from './img-part.service';\r\nimport { ImgPart } from './img-part';\r\n\r\n@Component({\r\n    selector: 'my-img-canvas',\r\n    templateUrl: './img-canvas.component.html',\r\n    styleUrls: ['./img-canvas.component.css'],\r\n    providers: [ImgPartService]\r\n})\r\nexport class ImgCanvasComponent implements AfterViewInit {\r\n    @ViewChild('canvas') canvasRef: ElementRef;\r\n    canvas: HTMLCanvasElement;\r\n    context: CanvasRenderingContext2D;\r\n    shadowCanvas: HTMLCanvasElement;\r\n    shadowContext: CanvasRenderingContext2D;\r\n    imgCanvas: HTMLCanvasElement;\r\n    _imgParts: ImgPart[];\r\n\r\n    set imgParts(value: ImgPart[]) {\r\n        this._imgParts = value;\r\n        this._isDirty = true;\r\n    }\r\n\r\n    get imgParts(): ImgPart[] {\r\n        return this._imgParts;\r\n    }\r\n\r\n    resizeSubject = new Subject<string>()\r\n\r\n    constructor(private fileService: FileService, private imgPartService: ImgPartService) { }\r\n\r\n    imgChangeHandler() {\r\n        this.fadeOutOldImg();\r\n    }\r\n\r\n    fadeInNewImg() {\r\n        this.loadImg().then(() => {\r\n            this.imgParts = this.imgPartService.fadeInParts(this.makeParts());\r\n        });\r\n    }\r\n\r\n    fadeOutOldImg() {\r\n        this.imgParts = this.imgPartService.fadeOutParts(this.imgParts);\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        this.canvas = this.canvasRef.nativeElement as HTMLCanvasElement;\r\n        this.context = this.canvas.getContext('2d');\r\n        this.shadowCanvas = document.createElement('canvas');\r\n        this.shadowContext = this.shadowCanvas.getContext('2d');\r\n\r\n        this.resetCanvasSize();\r\n        this.fadeInNewImg();\r\n        this.startAnimation();\r\n\r\n        this.resizeSubject.debounceTime(300).subscribe(() => {\r\n            this.resetCanvasSize();\r\n            this.fadeInNewImg();\r\n        });\r\n    }\r\n\r\n    startAnimation() {\r\n        window.requestAnimationFrame(() => {\r\n            if (this.isDirty()) {\r\n                this.draw();\r\n            }\r\n            this.startAnimation();\r\n        });\r\n    }\r\n\r\n    private _isDirty = false;\r\n\r\n    isDirty() {\r\n        if (!this.imgParts) return false;\r\n        let result = false;\r\n        if (this._isDirty) {\r\n            this._isDirty = false;\r\n            result = true;\r\n        }\r\n        if (this.imgPartService.animateParts(this.imgParts)) {\r\n            result = true;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    @HostListener('window:resize', ['$event'])\r\n    onResize(event) {\r\n        this.resizeSubject.next('resize');\r\n    }\r\n\r\n    @HostListener('window:mousemove', ['$event'])\r\n    onMouseMove(event) {\r\n        let rect = this.canvas.getBoundingClientRect();\r\n        this.imgPartService.setMousePosition(event.offsetX - rect.left, event.offsetY - rect.top);\r\n    }\r\n\r\n    resetCanvasSize() {\r\n        this.shadowCanvas.width = this.canvas.width = Math.floor(this.canvas.parentElement.clientWidth);\r\n        this.shadowCanvas.height = this.canvas.height = Math.floor(this.canvas.parentElement.clientHeight);\r\n    }\r\n\r\n    makeParts() {\r\n        let offsetX = (this.canvas.width - this.imgCanvas.width) >> 1;\r\n        let offsetY = (this.canvas.height - this.imgCanvas.height) >> 1;\r\n        return this.imgPartService.makeParts(this.imgCanvas.width, this.imgCanvas.height, offsetX, offsetY);\r\n    }\r\n\r\n    loadImg(): Promise<any> {\r\n        return this.fileService.loadImage(this.canvas.width, this.canvas.height).then((imgCanvas) => {\r\n            this.imgCanvas = imgCanvas;\r\n        });\r\n    }\r\n\r\n    draw() {\r\n        this.shadowContext.fillStyle = '#fff';\r\n        this.shadowContext.fillRect(0, 0, this.shadowCanvas.width, this.shadowCanvas.height);\r\n        let partsAllDead = true;\r\n        for (let i = 0; i < this.imgParts.length; i++) {\r\n            let part = this.imgParts[i];\r\n            if (this.imgPartService.isPartAlive(part)) {\r\n                partsAllDead = false;\r\n                if (this.imgPartService.isInsideCanvas(part, this.canvas)) {\r\n                    this.shadowContext.drawImage(this.imgCanvas, part.offsetX, part.offsetY, part.width, part.height, part.canvasOffsetX, part.canvasOffsetY, part.width, part.height);\r\n                }\r\n            }\r\n        }\r\n        if (partsAllDead) {\r\n            this.fadeInNewImg();\r\n        }\r\n        this.context.drawImage(this.shadowCanvas, 0, 0);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/img-canvas.component.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 67;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 67\n// module chunks = 1","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { Component, ViewChild } from '@angular/core';\nimport { ImgCanvasComponent } from './img-canvas.component';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  @ViewChild(ImgCanvasComponent) canvas: ImgCanvasComponent;\n\n  onSelectImage() {\n    this.canvas.imgChangeHandler();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { HeaderComponent } from './header.component';\nimport { ImgCanvasComponent } from './img-canvas.component';\n\nimport { FileService } from './file.service';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    HeaderComponent,\n    ImgCanvasComponent\n  ],\n  imports: [\n    BrowserModule\n  ],\n  providers: [FileService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, Output, EventEmitter } from '@angular/core';\r\nimport { FileService } from './file.service';\r\n\r\n@Component({\r\n    selector: 'my-header',\r\n    templateUrl: './header.component.html',\r\n    styleUrls: ['./header.component.css']\r\n})\r\nexport class HeaderComponent {\r\n    title = 'Blast the image';\r\n    subTitle = 'Roll over the image bellow to see the effect';\r\n\r\n    @Output() onSelectImage = new EventEmitter();\r\n\r\n    constructor(private fileService: FileService) { }\r\n\r\n    readImage(fileInput: HTMLInputElement) {\r\n        this.fileService.readFile(fileInput.files[0]).then(() => { this.onSelectImage.emit(); });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/header.component.ts","import { Injectable } from '@angular/core';\r\n\r\nimport { ImgPart } from './img-part';\r\n\r\nconst PART_WIDTH = 10;\r\nconst PART_HEIGHT = 10;\r\nconst FADEIN_DURATION = 12;\r\nconst FADEOUT_DURATION = 36;\r\n\r\nconst MOUSE_EFFECT_RADIUS = 100;\r\nconst BACK_TO_ORIGIN_FRACTION = .9;\r\nconst MOVE_TO_MOUSE_FRACTION = 1;\r\n\r\n@Injectable()\r\nexport class ImgPartService {\r\n    mouseX: number;\r\n    mouseY: number;\r\n\r\n    setMousePosition(x: number, y: number) {\r\n        this.mouseX = Math.round(x);\r\n        this.mouseY = Math.round(y);\r\n    }\r\n\r\n    makeParts(w: number, h: number, offsetX: number, offsetY: number): ImgPart[] {\r\n        let parts: ImgPart[] = [];\r\n        let columns = Math.ceil(w / PART_WIDTH);\r\n        let rows = Math.ceil(h / PART_HEIGHT);\r\n\r\n        for (let i = 0; i < rows; i++) {\r\n            let y = i * PART_HEIGHT;\r\n            for (let j = 0; j < columns; j++) {\r\n                let x = j * PART_WIDTH;\r\n                let canvasX = x + offsetX;\r\n                let canvasY = y + offsetY;\r\n                parts.push({\r\n                    offsetX: x,\r\n                    offsetY: y,\r\n                    width: PART_WIDTH,\r\n                    height: PART_HEIGHT,\r\n                    canvasOffsetX: canvasX,\r\n                    canvasOffsetY: canvasY,\r\n                    canvasOriginOffsetX: canvasX,\r\n                    canvasOriginOffsetY: canvasY,\r\n                    vx: 0,\r\n                    vy: 0\r\n                });\r\n            }\r\n        }\r\n        return parts;\r\n    }\r\n\r\n    fadeOutParts(parts: ImgPart[]): ImgPart[] {\r\n        for (let i = 0; i < parts.length; i++) {\r\n            let part = parts[i];\r\n            part.life = Math.floor(Math.random() * FADEOUT_DURATION);\r\n            part.vx = Math.floor((Math.random() - .5) * 50);\r\n            part.vy = Math.floor((Math.random() - .5) * 30);\r\n            part.canvasOriginOffsetX = part.canvasOriginOffsetX + part.vx / 4 * FADEOUT_DURATION;\r\n            part.canvasOriginOffsetY = 1000;\r\n        }\r\n        return parts;\r\n    }\r\n\r\n    fadeInParts(parts: ImgPart[]): ImgPart[] {\r\n        for (let i = 0; i < parts.length; i++) {\r\n            let part = parts[i];\r\n            part.birth = Math.floor(Math.random() * FADEIN_DURATION);\r\n            part.canvasOffsetY = 1000;\r\n            part.vx = Math.floor((Math.random() - .5) * 100);\r\n        }\r\n        return parts;\r\n    }\r\n\r\n    animateParts(parts: ImgPart[]): boolean {\r\n        let changed = false;\r\n        for (let i = 0; i < parts.length; i++) {\r\n            if (this.animatePart(parts[i]))\r\n                changed = true;\r\n        }\r\n        return changed;\r\n    }\r\n\r\n    animatePart(part: ImgPart): boolean {\r\n        let animated = false;\r\n        // fadein\r\n        if (part.birth != undefined && part.birth > 0) {\r\n            part.birth--;\r\n            if (part.birth <= 0) { // born\r\n                animated = true;\r\n            }\r\n        }\r\n        // fadeout\r\n        if (part.life != undefined && part.life > 0) {\r\n            part.life--;\r\n            if (part.life <= 0) { // die\r\n                animated = true;\r\n            }\r\n        }\r\n        // move\r\n        if (this.movePart(part)) animated = true;\r\n        return animated;\r\n    }\r\n\r\n    movePart(part): boolean {\r\n        let animated = false;\r\n        let fraction: number;\r\n\r\n        if (this.mouseX != undefined && this.distant(part.canvasOffsetX, part.canvasOffsetY, this.mouseX, this.mouseY) < MOUSE_EFFECT_RADIUS) {\r\n            // move to target\r\n            fraction = 1;\r\n            let distantToMouse = this.distant(part.canvasOffsetX, part.canvasOffsetY, this.mouseX, this.mouseY);\r\n            if (distantToMouse == 0)\r\n                return false;\r\n            part.vx += (this.mouseX - part.canvasOffsetX) / distantToMouse;\r\n            part.vy += (this.mouseY - part.canvasOffsetY) / distantToMouse;\r\n            part.vx *= fraction;\r\n            part.vy *= fraction;\r\n            part.canvasOffsetX += part.vx;\r\n            part.canvasOffsetY += part.vy;\r\n            return true;\r\n        } else {\r\n            // move to orgin\r\n            fraction = .9;\r\n            let distantToOrigin = this.distant(part.canvasOffsetX, part.canvasOffsetY, part.canvasOriginOffsetX, part.canvasOriginOffsetY);\r\n            if (distantToOrigin == 0) {\r\n                return false;\r\n            } else if (distantToOrigin < 1) {\r\n                part.canvasOffsetX = part.canvasOriginOffsetX;\r\n                part.canvasOffsetY = part.canvasOriginOffsetY;\r\n                return true;\r\n            }\r\n            part.vx += (part.canvasOriginOffsetX - part.canvasOffsetX) / distantToOrigin;\r\n            part.vy += (part.canvasOriginOffsetY - part.canvasOffsetY) / distantToOrigin;\r\n            part.vx *= fraction;\r\n            part.vy *= fraction;\r\n            part.canvasOffsetX += part.vx;\r\n            part.canvasOffsetY += part.vy;\r\n            return true;\r\n        }\r\n    }\r\n\r\n    distant(x1: number, y1: number, x2: number, y2: number): number {\r\n        let dx = x1 - x2;\r\n        let dy = y1 - y2;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n\r\n    isPartAlive(part: ImgPart): boolean {\r\n        let isBorn = part.birth == undefined || part.birth <= 0;\r\n        let isDead = part.life != undefined && part.life <= 0;\r\n        return isBorn && !isDead;\r\n    }\r\n\r\n    isInsideCanvas(part: ImgPart, canvas: HTMLCanvasElement): boolean {\r\n        return part.canvasOffsetX > 0 && part.canvasOffsetX < canvas.width\r\n            && part.canvasOffsetY > 0 && part.canvasOffsetY < canvas.height;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/img-part.service.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts"],"sourceRoot":""}